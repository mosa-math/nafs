<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØªØ¯Ø±ÙŠØ¨ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§ÙØ³ ÙÙŠ Ù…Ø§Ø¯Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ù„Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</title>
  <style>
    :root{
      --bg1:#eef6ff;
      --bg2:#f7f2ff;
      --card:#ffffffcc;
      --card2:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --primary:#4f46e5;
      --primary2:#06b6d4;
      --good:#16a34a;
      --bad:#dc2626;
      --line:#e2e8f0;
      --shadow: 0 20px 60px rgba(2,6,23,.10);
      --radius:22px;
      --radius2:16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, "Noto Kufi Arabic", "Noto Sans Arabic", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 80% 0%, rgba(79,70,229,.18), transparent 55%),
        radial-gradient(900px 500px at 10% 10%, rgba(6,182,212,.16), transparent 55%),
        linear-gradient(180deg, var(--bg2), var(--bg1));
      min-height:100vh;
    }

    .wrap{
      width:min(1100px, 92vw);
      margin: 28px auto 40px;
    }

    /* ===== HERO (ØªØµÙ…ÙŠÙ… Ø§Ù„ØµÙˆØ±Ø© 1) ===== */
    .hero{
      background: linear-gradient(135deg, #6d28d9, #2563eb 55%, #06b6d4);
      color:#fff;
      border-radius: 28px;
      padding: 22px 22px 20px;
      box-shadow: var(--shadow);
      position: relative;
      overflow:hidden;
    }
    .hero::after{
      content:"";
      position:absolute; inset:-60px -80px auto auto;
      width:280px; height:280px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.25), transparent 60%);
      transform: rotate(18deg);
      pointer-events:none;
    }
    .heroTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:10px;
      background: rgba(255,255,255,.18);
      border:1px solid rgba(255,255,255,.22);
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 700;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      user-select:none;
    }
    .chip small{opacity:.95;font-weight:700}
    .schoolBox{
      display:flex;
      align-items:center;
      gap:12px;
      text-align:right;
    }
    .schoolText{
      line-height:1.25;
      font-weight:800;
      font-size: 13.5px;
      opacity:.98;
    }
    .schoolText .sub{display:block; font-weight:700; opacity:.92; font-size: 12.5px;}
    .logo{
      width:54px; height:54px;
      border-radius:14px;
      background: rgba(255,255,255,.92);
      display:grid; place-items:center;
      overflow:hidden;
      box-shadow: 0 18px 40px rgba(0,0,0,.18);
      flex:0 0 auto;
    }
    .logo img{width:100%; height:100%; object-fit:contain; padding:6px}

    .heroMain{
      margin-top: 14px;
      text-align:center;
    }
    .heroTitle{
      font-size: clamp(20px, 2.3vw, 34px);
      margin: 8px 0 6px;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .heroSubtitle{
      margin:0;
      font-weight: 700;
      opacity: .95;
      font-size: 14px;
    }
    .badges{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 14px;
    }
    .badge{
      background: rgba(255,255,255,.92);
      color:#0f172a;
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 800;
      font-size: 13px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      box-shadow: 0 14px 35px rgba(0,0,0,.12);
      border: 1px solid rgba(15, 23, 42, .06);
      user-select:none;
    }

    /* ===== CARD (ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ + Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹) ===== */
    .card{
      margin-top: 18px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,.55);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 18px;
    }
    .cardInner{
      background: var(--card2);
      border: 1px solid rgba(15,23,42,.06);
      border-radius: var(--radius2);
      padding: 16px;
    }

    .welcomeRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      margin-bottom: 12px;
    }
    .welcomeTitle{
      margin:0;
      font-weight: 900;
      font-size: 20px;
    }
    .welcomeSub{
      margin: 4px 0 0;
      color: var(--muted);
      font-weight: 700;
      font-size: 13.5px;
    }
    .emojiBox{
      width:44px; height:44px;
      border-radius: 14px;
      background: #f1f5f9;
      border: 1px solid rgba(15,23,42,.06);
      display:grid; place-items:center;
      font-size: 22px;
      flex:0 0 auto;
    }

    .grid2{
      display:grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 14px;
      align-items: start;
    }

    .inputs{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .field{
      position:relative;
    }
    input, select{
      width:100%;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid var(--line);
      outline:none;
      font-size: 14px;
      font-weight: 700;
      background:#fff;
    }
    input:focus, select:focus{
      border-color: rgba(79,70,229,.55);
      box-shadow: 0 0 0 4px rgba(79,70,229,.10);
    }

    .metaRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-start;
      align-items:center;
      margin-top: 12px;
    }
    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 999px;
      background:#f8fafc;
      border:1px solid rgba(15,23,42,.08);
      font-weight: 800;
      font-size: 13px;
      color:#111827;
    }

    /* Ø²Ø± Ø§Ø¨Ø¯Ø£ (Ù…ØªÙ†Ø§Ø³Ù‚) */
    .btn{
      border:0;
      cursor:pointer;
      font-weight: 900;
      padding: 14px 18px;
      border-radius: 16px;
      font-size: 15px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btnPrimary{
      color:#fff;
      background: linear-gradient(135deg, var(--primary), #2563eb);
      box-shadow: 0 18px 40px rgba(79,70,229,.22);
      min-width: 168px;
    }
    .btnPrimary:hover{ transform: translateY(-1px); }
    .btnPrimary:active{ transform: translateY(0px) scale(.99); }
    .btnGhost{
      background:#eef2ff;
      color:#1e293b;
      border:1px solid rgba(79,70,229,.22);
      min-width: 140px;
    }
    .btn[disabled]{opacity:.55; cursor:not-allowed; transform:none}

    /* ===== Week Selector (ØªØµÙ…ÙŠÙ… Ø§Ù„ØµÙˆØ±Ø© 2) ===== */
    .weekBox{
      background:#fff;
      border:1px solid rgba(15,23,42,.06);
      border-radius: 18px;
      padding: 14px;
      box-shadow: 0 14px 35px rgba(2,6,23,.06);
    }
    .weekTitle{
      margin: 0 0 10px;
      font-weight: 900;
      font-size: 15px;
      text-align:center;
    }
    .weeksGrid{
      display:grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap:10px;
    }
    .weekBtn{
      border:1px solid rgba(15,23,42,.10);
      background:#fff;
      border-radius: 16px;
      padding: 10px 8px;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
      text-align:center;
      font-weight: 900;
      font-size: 13px;
      color:#0f172a;
      box-shadow: 0 10px 22px rgba(2,6,23,.04);
    }
    .weekBtn small{
      display:block;
      margin-top:4px;
      font-weight:800;
      color: var(--muted);
      font-size: 11px;
    }
    .weekBtn:hover{ transform: translateY(-1px); }
    .weekBtn.active{
      border-color: rgba(79,70,229,.55);
      box-shadow: 0 16px 34px rgba(79,70,229,.16);
      background: linear-gradient(180deg, #fff, #f5f3ff);
    }

    .note{
      margin-top: 10px;
      color: var(--muted);
      font-weight: 800;
      font-size: 12.5px;
      text-align: left;
    }
    .note strong{color:#0f172a}

    /* ===== Quiz UI (ØªØµÙ…ÙŠÙ… Ø§Ù„ØµÙˆØ±Ø© 3) ===== */
    .quizTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 14px;
    }
    .userTag{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight: 900;
    }
    .userDot{
      width:32px; height:32px;
      border-radius: 999px;
      background:#e2e8f0;
      display:grid; place-items:center;
      font-size: 16px;
    }
    .qCount{
      font-weight: 900;
      color:#0f172a;
    }
    .progressBar{
      height: 10px;
      width: 260px;
      background:#e8eefc;
      border-radius: 999px;
      overflow:hidden;
      border:1px solid rgba(15,23,42,.06);
    }
    .progressFill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, #2563eb, #4f46e5);
      border-radius: 999px;
      transition: width .25s ease;
    }
    .subline{
      margin-top: 8px;
      text-align:center;
      color: var(--muted);
      font-weight: 800;
      font-size: 12.5px;
    }

    .qCard{
      margin-top: 14px;
      background:#fff;
      border:1px solid rgba(15,23,42,.06);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 18px 50px rgba(2,6,23,.06);
    }
    .qTitle{
      margin: 0 0 14px;
      font-size: 20px;
      font-weight: 900;
      text-align:center;
    }

    /* Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ†Ø§Ø³Ù‚Ø© (ÙŠÙ…ÙŠÙ†/ÙŠØ³Ø§Ø±) */
    .choices{
      display:grid;
      gap:12px;
      margin-top: 10px;
    }
    .choice{
      border: 2px solid rgba(37,99,235,.18);
      background: #f4f8ff;
      border-radius: 16px;
      padding: 14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease, background .12s ease;
      font-weight: 900;
      min-height: 56px;
    }
    .choice:hover{ transform: translateY(-1px); box-shadow: 0 14px 30px rgba(2,6,23,.06); }
    .choice .num{
      width:38px; height:38px;
      border-radius: 999px;
      display:grid; place-items:center;
      background:#fff;
      border:1px solid rgba(15,23,42,.10);
      color:#0f172a;
      font-weight: 900;
      flex:0 0 auto;
    }
    .choice .txt{
      flex:1;
      text-align:right;
      font-size: 16px;
      color:#0f172a;
    }

    /* ØµØ­/Ø®Ø·Ø£ Ù…Ø«Ù„ ØµÙˆØ± 4/5 */
    .choice.correct{
      background: #ecfdf3;
      border-color: rgba(22,163,74,.55);
      box-shadow: 0 18px 45px rgba(22,163,74,.12);
    }
    .choice.wrong{
      background: #fef2f2;
      border-color: rgba(220,38,38,.55);
      box-shadow: 0 18px 45px rgba(220,38,38,.10);
    }
    .choice.selected{
      border-color: rgba(79,70,229,.55);
      box-shadow: 0 18px 45px rgba(79,70,229,.10);
      background: linear-gradient(180deg, #f4f8ff, #f7f2ff);
    }

    .navRow{
      margin-top: 14px;
      display:flex;
      gap:10px;
      justify-content:space-between;
      align-items:center;
    }
    .btnWide{
      width:100%;
      border-radius: 16px;
      padding: 16px 18px;
      font-size: 16px;
      box-shadow: 0 18px 50px rgba(2,6,23,.10);
    }
    .btnNext{
      background: linear-gradient(135deg, #94a3b8, #64748b);
      color:#fff;
      border:0;
    }
    .btnNext.ready{
      background: linear-gradient(135deg, #2563eb, #4f46e5);
    }

    /* ===== Results (ØµÙˆØ± 6/7) ===== */
    .resultGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
      align-items:start;
    }
    .stat{
      background:#fff;
      border:1px solid rgba(15,23,42,.06);
      border-radius: 18px;
      padding: 14px;
      box-shadow: 0 18px 50px rgba(2,6,23,.06);
    }
    .stat h3{
      margin:0 0 8px;
      font-weight: 900;
      font-size: 15px;
    }
    .bigNum{
      font-size: 36px;
      font-weight: 1000;
      margin: 0;
    }
    .muted{color:var(--muted); font-weight:800}

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 12px;
      justify-content:center;
    }

    /* Footer center */
    footer.foot{
      margin-top: 14px;
      text-align: center;
      color:#475569;
      font-weight: 900;
      padding: 10px 0 4px;
    }

    /* Responsive */
    @media (max-width: 900px){
      .grid2{grid-template-columns:1fr}
      .inputs{grid-template-columns:1fr}
      .weeksGrid{grid-template-columns: repeat(3, minmax(0,1fr));}
      .progressBar{width: 180px;}
      .resultGrid{grid-template-columns:1fr}
    }
</style>
</head>
<body>
  <div class="wrap">

    <!-- HERO (Ø§Ù„ØµÙˆØ±Ø© 1) -->
    <section class="hero">
      <div class="heroTop">
     <div class="chip">â­ ØªØ¯Ø±ÙŠØ¨ ØªÙØ§Ø¹Ù„ÙŠ</div>
        </div>
        <div class="schoolBox">
         <div class="school-text">
              <div class="school-name">Ù…Ø¯Ø±Ø³Ø© Ø¹Ù„ÙŠ Ø¨Ù† Ø£Ø¨ÙŠ Ø·Ø§Ù„Ø¨ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</div>
            <span class="sub">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø¨Ù…Ù†Ø·Ù‚Ø© Ù†Ø¬Ø±Ø§Ù†</span>
          </div>
          <img class="school-logo" src="school-logo.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø©" />
            <div class="school-text">
        </div>
      </div>

      <div class="heroMain">
        <h1 class="heroTitle">ØªØ¯Ø±ÙŠØ¨ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§ÙØ³ ÙÙŠ Ù…Ø§Ø¯Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ù„Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</h1>
        <p class="heroSubtitle">Ø§Ø®ØªØ± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ØŒ Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒØŒ ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø© ğŸ‰</p>

        <div class="badges">
          <div class="badge">ğŸ§  Ø£Ø³Ø¦Ù„Ø© Ù…Ù…ØªØ¹Ø©</div>
          <div class="badge">â±ï¸ ÙˆÙ‚Øª Ù…Ù†Ø¸Ù…</div>
          <div class="badge">ğŸ† Ø´Ù‡Ø§Ø¯Ø© Ø¥Ù†Ø¬Ø§Ø²</div>
        </div>
      </div>
    </section>

    <!-- START SCREEN -->
    <section id="screenStart" class="card">
      <div class="cardInner">
        <div class="welcomeRow">
          <div>
            <h2 class="welcomeTitle">Ø£Ù‡Ù„Ù‹Ø§ ÙˆØ³Ù‡Ù„Ù‹Ø§ ÙŠØ§ Ø¨Ø·Ù„!</h2>
            <p class="welcomeSub">Ø§ÙƒØªØ¨ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø«Ù… Ø§Ø®ØªØ± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ÙˆØ§Ø¶ØºØ· Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ğŸš€</p>
          </div>
          <div class="emojiBox">ğŸ‘‹</div>
        </div>

        <div class="grid2">
          <!-- left: inputs -->
          <div>
            <div class="inputs">
              <div class="field">
                <input id="studentName" type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨" autocomplete="off" />
              </div>
              <div class="field">
                <input id="classRoom" type="text" placeholder="Ø§Ù„ÙØµÙ„" autocomplete="off" />
              </div>
            </div>

            <div class="metaRow">
              <div class="pill">ğŸ“Œ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: <span id="qCountLabel">â€”</span></div>
              <div class="pill">â³ Ø§Ù„Ù…Ø¯Ø©: <span id="timeLabel">10 Ø¯Ù‚Ø§Ø¦Ù‚</span></div>
              <div class="pill">ğŸ§© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø®ØªØ§Ø±: <span id="weekLabel">â€”</span></div>
            </div>

            <div class="actions" style="justify-content:flex-start; margin-top:14px;">
              <button id="btnStart" class="btn btnPrimary">ğŸš€ Ø§Ø¨Ø¯Ø£ â€Ø§Ù„ØªØ¯Ø±ÙŠØ¨</button>
              <button id="btnReset" class="btn btnGhost" type="button">â†©ï¸ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ø®ØªÙŠØ§Ø±</button>
            </div>

            <div class="note"><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ØªØ¨Ù‚Ù‰ Ø¯Ø§Ø®Ù„ Ø¬Ù‡Ø§Ø²Ùƒ ÙˆÙ„Ø§ ÙŠØªÙ… Ø±ÙØ¹Ù‡Ø§.</div>
          </div>

          <!-- right: weeks -->
          <div class="weekBox">
            <h3 class="weekTitle">Ø§Ø®ØªØ± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</h3>
            <div id="weeksGrid" class="weeksGrid"></div>
            <div class="note" style="text-align:center; margin-top:12px;">Ø¨Ø¹Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ø¶ØºØ· <strong>Ø§Ø¨Ø¯Ø£ â€Ø§Ù„ØªØ¯Ø±ÙŠØ¨</strong>.</div>
          </div>
        </div>
      </div>

      <footer class="foot">Ø¥Ø¹Ø¯Ø§Ø¯: Ù…ÙˆØ³Ù‰ Ø§Ù„ØµØ¨Ø­ÙŠ</footer>
    </section>

    <!-- QUIZ SCREEN -->
    <section id="screenQuiz" class="card" style="display:none;">
      <div class="cardInner">
        <div class="quizTop">
          <div class="qCount" id="qTopLabel">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 10</div>

          <div class="progressBar" aria-hidden="true">
            <div class="progressFill" id="progressFill"></div>
          </div>

          <div class="userTag">
            <span id="studentTag">Ø·Ø§Ù„Ø¨</span>
            <span class="userDot">ğŸ‘¤</span>
          </div>
        </div>

        <div class="subline" id="subLine">Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª â€“ Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ â€¢ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="timer">10:00</span></div>

        <div class="qCard">
          <h3 class="qTitle" id="qText">â€”</h3>
          <div class="choices" id="choices"></div>

          <div class="navRow">
            <button id="btnPrev" class="btn btnGhost" type="button">â†©ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <button id="btnNext" class="btn btnWide btnNext" type="button">â¬…ï¸ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
          </div>
        </div>
      </div>
    </section>

    <!-- RESULTS SCREEN -->
    <section id="screenResult" class="card" style="display:none;">
      <div class="cardInner">
        <h2 class="welcomeTitle" style="text-align:center; margin-bottom:6px;">ğŸ‰ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
        <p class="welcomeSub" style="text-align:center; margin-top:0;">Ø´Ø§Ù‡Ø¯ Ù†ØªÙŠØ¬ØªÙƒ ÙˆØ§Ø·Ø¨Ø¹/Ø­Ù…Ù‘Ù„ Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</p>

        <div class="resultGrid" style="margin-top:14px;">
          <div class="stat">
            <h3>Ø§Ù„Ù†ØªÙŠØ¬Ø©</h3>
            <p class="bigNum" id="scoreBig">0 / 0</p>
            <p class="muted" id="scoreSub">â€”</p>
          </div>
          <div class="stat">
            <h3>ØªÙØ§ØµÙŠÙ„</h3>
            <p class="muted" id="detailLine">â€”</p>
            <p class="muted" id="timeUsed">â€”</p>
          </div>
        </div>

        <div class="actions">
          <button id="btnDownloadCert" class="btn btnPrimary" type="button">â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© (PNG)</button>
          <button id="btnPrintCert" class="btn btnGhost" type="button">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©</button>
          <button id="btnRestart" class="btn btnGhost" type="button">ğŸ”„ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©</button>
        </div>

        <canvas id="certCanvas" width="1600" height="1100" style="display:none;"></canvas>
      </div>

      <footer class="foot">Ø¥Ø¹Ø¯Ø§Ø¯: Ù…ÙˆØ³Ù‰ Ø§Ù„ØµØ¨Ø­ÙŠ</footer>
    </section>

  </div>

  <script>
    /***********************
     * 1) Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø©
     ***********************/
    // Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‡Ù†Ø§ ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹ (1..10). ÙƒÙ„ Ø³Ø¤Ø§Ù„: q Ø§Ù„Ù†ØµØŒ c Ø§Ù„Ø®ÙŠØ§Ø±Ø§ØªØŒ correct Ø±Ù‚Ù… Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„ØµØ­ÙŠØ­ (0..3)
    window.WEEKS = {
      10: [
        { q: "Ø£ÙˆØ¬Ø¯ Ù†Ø§ØªØ¬: Ù£Ù¦Ù¢ Ã— Ù¢Ù¥", c: ["Ù§Ù¢Ù¥Ù ", "Ù¨Ù Ù¥Ù ", "Ù©Ù Ù¥Ù ", "Ù¦Ù¢Ù¥Ù "], correct: 0 },
        { q: "Ø£ÙˆØ¬Ø¯ Ù†Ø§ØªØ¬: Ù¦Ù¨Ù§Ù£Ù¥Ù©Ù¤ âˆ’ Ù£Ù§Ù¦Ù¡Ù¤Ù¥Ù¢", c: ["Ù£Ù¡Ù¡Ù¢Ù¡Ù¤Ù¢", "Ù£Ù Ù¡Ù¢Ù¡Ù¤Ù¢", "Ù£Ù¢Ù¡Ù¡Ù¡Ù¤Ù¢", "Ù£Ù¡Ù¡Ù¡Ù¢Ù¤Ù¢"], correct: 0 },
        { q: "Ù…Ø§ Ø§Ù„Ù‚Ø§Ø³Ù… Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ø§Ù„Ø£ÙƒØ¨Ø± Ù„Ù„Ø¹Ø¯Ø¯ÙŠÙ† Ù¡Ù¢ Ùˆ Ù¡Ù¨ØŸ", c: ["Ù£", "Ù¦", "Ù©", "Ù¡Ù¢"], correct: 1 },
      ],
      9: [
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„ØªØ§Ø³Ø¹ Ù¡", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 1 },
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„ØªØ§Ø³Ø¹ Ù¢", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 2 },
      ],
      8: [
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù…Ù† Ù¡", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 0 },
      ],
      7: [
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¨Ø¹ Ù¡", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 1 },
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¨Ø¹ Ù¢", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 2 },
      ],
      6: [
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¯Ø³ Ù¡", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 0 },
      ],
      5: [
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø³ Ù¡", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 1 },
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø³ Ù¢", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 2 },
      ],
      4: [
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ù¡", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 0 },
      ],
      3: [
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù„Ø« Ù¡", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 1 },
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù„Ø« Ù¢", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 2 },
      ],
      2: [
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ Ù¡", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 0 },
      ],
      1: [
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„ Ù¡", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 1 },
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„ Ù¢", c: ["Ø£", "Ø¨", "Ø¬", "Ø¯"], correct: 2 },
      ],
    };

    /***********************
     * 2) Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø©
     ***********************/
    const screenStart = document.getElementById("screenStart");
    const screenQuiz  = document.getElementById("screenQuiz");
    const screenResult= document.getElementById("screenResult");

    const studentName = document.getElementById("studentName");
    const classRoom   = document.getElementById("classRoom");

    const weeksGrid   = document.getElementById("weeksGrid");
    const weekLabel   = document.getElementById("weekLabel");
    const qCountLabel = document.getElementById("qCountLabel");
    const btnStart    = document.getElementById("btnStart");
    const btnReset    = document.getElementById("btnReset");

    const qTopLabel   = document.getElementById("qTopLabel");
    const qText       = document.getElementById("qText");
    const choicesBox  = document.getElementById("choices");
    const btnPrev     = document.getElementById("btnPrev");
    const btnNext     = document.getElementById("btnNext");
    const progressFill= document.getElementById("progressFill");
    const timerEl     = document.getElementById("timer");
    const studentTag  = document.getElementById("studentTag");

    const scoreBig    = document.getElementById("scoreBig");
    const scoreSub    = document.getElementById("scoreSub");
    const detailLine  = document.getElementById("detailLine");
    const timeUsedEl  = document.getElementById("timeUsed");
    const btnRestart  = document.getElementById("btnRestart");
    const btnDownload = document.getElementById("btnDownloadCert");
    const btnPrint    = document.getElementById("btnPrintCert");

    const certCanvas  = document.getElementById("certCanvas");

    /***********************
     * 3) Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
     ***********************/
    let selectedWeek = null;
    let QUESTIONS = [];
    let idx = 0;
    let answers = [];        // chosen index Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„
    let locked = false;      // Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ÙŠØ¸Ù‡Ø± ØµØ­/Ø®Ø·Ø£ Ø«Ù… ÙŠØ³Ù…Ø­ Ø§Ù„ØªØ§Ù„ÙŠ

    // ÙˆÙ‚Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (10 Ø¯Ù‚Ø§Ø¦Ù‚)
    const QUIZ_SECONDS = 10 * 60;
    let remaining = QUIZ_SECONDS;
    let timerId = null;
    let startTime = null;

    /***********************
     * 4) Ø¨Ù†Ø§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹
     ***********************/
    function buildWeeks(){
      weeksGrid.innerHTML = "";
      const weeks = Object.keys(window.WEEKS).map(Number).sort((a,b)=>b-a);
      weeks.forEach(w=>{
        const b = document.createElement("button");
        b.className = "weekBtn";
        b.type = "button";
        b.innerHTML = `Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ${toArabicDigits(w)}<small>Ø§Ø¶ØºØ· Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±</small>`;
        b.addEventListener("click", ()=>{
          selectedWeek = w;
          QUESTIONS = window.WEEKS[w] || [];
          document.querySelectorAll(".weekBtn").forEach(x=>x.classList.remove("active"));
          b.classList.add("active");
          weekLabel.textContent = toArabicDigits(w);
          qCountLabel.textContent = toArabicDigits(QUESTIONS.length);
        });
        weeksGrid.appendChild(b);
      });
    }

    /***********************
     * 5) Ø§Ù„ØªØ­Ù‚Ù‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡
     ***********************/
    function validateStart(){
      if(!selectedWeek){
        alert("Ø§Ø®ØªØ± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø£ÙˆÙ„Ù‹Ø§.");
        return false;
      }
      if(!QUESTIONS.length){
        alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹.");
        return false;
      }
      const n = (studentName.value || "").trim();
      const c = (classRoom.value || "").trim();
      if(!n || !c){
        alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ§Ù„ÙØµÙ„ Ø¹Ø´Ø§Ù† ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±.");
        return false;
      }
      return true;
    }

    /***********************
     * 6) ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
     ***********************/
    function startQuiz(){
      if(!validateStart()) return;

      idx = 0;
      answers = new Array(QUESTIONS.length).fill(null);
      locked = false;

      remaining = QUIZ_SECONDS;
      startTime = Date.now();
      if(timerId) clearInterval(timerId);
      timerId = setInterval(tick, 1000);
      renderTimer();

      studentTag.textContent = studentName.value.trim();
      screenStart.style.display = "none";
      screenResult.style.display = "none";
      screenQuiz.style.display = "block";

      renderQuestion();
    }

    function tick(){
      remaining--;
      renderTimer();
      if(remaining <= 0){
        remaining = 0;
        renderTimer();
        finishQuiz(true);
      }
    }

    function renderTimer(){
      const m = Math.floor(remaining/60);
      const s = remaining%60;
      timerEl.textContent = `${toArabicDigits(m)}:${toArabicDigits(String(s).padStart(2,"0"))}`;
    }

    /***********************
     * 7) Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙˆØ§Ù„Ø®ÙŠØ§Ø±Ø§Øª
     ***********************/
    function renderQuestion(){
      const total = QUESTIONS.length;
      const q = QUESTIONS[idx];

      qTopLabel.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${toArabicDigits(idx+1)} Ù…Ù† ${toArabicDigits(total)}`;
      progressFill.style.width = `${((idx+1)/total)*100}%`;

      qText.textContent = q.q;

      choicesBox.innerHTML = "";
      const chosen = answers[idx];

      q.c.forEach((choiceText, i)=>{
        const row = document.createElement("div");
        row.className = "choice";
        row.dataset.i = i;

        const num = document.createElement("div");
        num.className = "num";
        num.textContent = toArabicDigits(i+1);

        const txt = document.createElement("div");
        txt.className = "txt";
        txt.textContent = choiceText;

        row.appendChild(txt);
        row.appendChild(num);

        if(chosen !== null && chosen === i) row.classList.add("selected");

        row.addEventListener("click", ()=>{
          if(locked) return;
          answers[idx] = i;

          // Ø¥Ø¸Ù‡Ø§Ø± ØµØ­/Ø®Ø·Ø£ Ù…Ø¨Ø§Ø´Ø±Ø©
          locked = true;
          showCorrectWrong(i);

          // Ø¬Ù‡Ù‘Ø² Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ
          btnNext.classList.add("ready");
          btnNext.textContent = (idx === total-1) ? "ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±" : "â¬…ï¸ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ";
        });

        choicesBox.appendChild(row);
      });

      // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
      btnPrev.disabled = (idx === 0);
      btnNext.classList.remove("ready");
      btnNext.textContent = (idx === total-1) ? "ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±" : "â¬…ï¸ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ";

      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ø®ØªØ§Ø± Ø³Ø§Ø¨Ù‚Ø§Ù‹ØŒ Ù†Ø¹ÙŠØ¯ Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø©
      if(chosen !== null){
        locked = true;
        showCorrectWrong(chosen);
        btnNext.classList.add("ready");
        btnNext.textContent = (idx === total-1) ? "ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±" : "â¬…ï¸ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ";
      }else{
        locked = false;
      }
    }

    function showCorrectWrong(chosenIndex){
      const q = QUESTIONS[idx];
      const correct = q.correct;

      [...choicesBox.children].forEach(el=>{
        const i = Number(el.dataset.i);
        el.classList.remove("correct","wrong","selected");

        if(i === chosenIndex) el.classList.add("selected");

        // Ù„Ùˆ Ø§Ø®ØªØ§Ø±ØŒ Ù†Ù„ÙˆÙ† Ø§Ù„ØµØ­ ÙˆØ§Ù„Ø®Ø·Ø£
        if(i === correct) el.classList.add("correct");
        if(i === chosenIndex && chosenIndex !== correct) el.classList.add("wrong");
      });
    }

    /***********************
     * 8) Ø§Ù„ØªØ§Ù„ÙŠ/Ø§Ù„Ø³Ø§Ø¨Ù‚/Ø¥Ù†Ù‡Ø§Ø¡
     ***********************/
    btnPrev.addEventListener("click", ()=>{
      if(idx === 0) return;
      idx--;
      locked = false;
      renderQuestion();
    });

    btnNext.addEventListener("click", ()=>{
      // Ù„Ø§Ø²Ù… ÙŠØ®ØªØ§Ø± Ù‚Ø¨Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
      if(answers[idx] === null){
        alert("Ø§Ø®ØªØ± Ø¥Ø¬Ø§Ø¨Ø© Ø£ÙˆÙ„Ù‹Ø§.");
        return;
      }

      if(idx === QUESTIONS.length-1){
        finishQuiz(false);
        return;
      }

      idx++;
      locked = false;
      renderQuestion();
    });

    function finishQuiz(auto){
      if(timerId) clearInterval(timerId);
      timerId = null;

      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©
      const total = QUESTIONS.length;
      let correctCount = 0;
      for(let i=0;i<total;i++){
        if(answers[i] === QUESTIONS[i].correct) correctCount++;
      }
      const wrongCount = total - correctCount;
      const percent = Math.round((correctCount/total)*100);

      scoreBig.textContent = `${toArabicDigits(correctCount)} / ${toArabicDigits(total)}`;
      scoreSub.textContent = `Ø§Ù„Ù†Ø³Ø¨Ø©: ${toArabicDigits(percent)}Ùª`;

      detailLine.textContent = `Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: ${toArabicDigits(correctCount)} â€¢ Ø§Ù„Ø®Ø§Ø·Ø¦Ø©: ${toArabicDigits(wrongCount)} â€¢ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹: ${toArabicDigits(selectedWeek)}`;

      const usedSec = QUIZ_SECONDS - remaining;
      timeUsedEl.textContent = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚: ${formatTime(usedSec)} ${auto ? "â€¢ (Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª)" : ""}`;

      // Ø¥Ø¸Ù‡Ø§Ø± ØµÙØ­Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      screenQuiz.style.display = "none";
      screenStart.style.display = "none";
      screenResult.style.display = "block";
    }

    btnRestart.addEventListener("click", ()=>{
      screenQuiz.style.display = "none";
      screenResult.style.display = "none";
      screenStart.style.display = "block";
    });

    btnReset.addEventListener("click", ()=>{
      selectedWeek = null;
      QUESTIONS = [];
      weekLabel.textContent = "â€”";
      qCountLabel.textContent = "â€”";
      document.querySelectorAll(".weekBtn").forEach(x=>x.classList.remove("active"));
    });

    /***********************
     * 9) Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© (ØªØ­Ù…ÙŠÙ„/Ø·Ø¨Ø§Ø¹Ø©)
     ***********************/
    function drawCertificate(){
      const ctx = certCanvas.getContext("2d");

      // Ø®Ù„ÙÙŠØ©
      ctx.clearRect(0,0,certCanvas.width, certCanvas.height);
      const g = ctx.createLinearGradient(0,0,certCanvas.width, certCanvas.height);
      g.addColorStop(0, "#f7f2ff");
      g.addColorStop(0.55, "#eef6ff");
      g.addColorStop(1, "#eaf6ff");
      ctx.fillStyle = g;
      ctx.fillRect(0,0,certCanvas.width, certCanvas.height);

      // Ø¥Ø·Ø§Ø±
      ctx.strokeStyle = "rgba(79,70,229,.35)";
      ctx.lineWidth = 10;
      roundRect(ctx, 70, 70, certCanvas.width-140, certCanvas.height-140, 40);
      ctx.stroke();

      // Ø¹Ù†ÙˆØ§Ù†
      ctx.fillStyle = "#0f172a";
      ctx.font = "900 60px system-ui, -apple-system, 'Segoe UI', Tahoma, Arial";
      ctx.textAlign = "center";
      ctx.fillText("Ø´Ù‡Ø§Ø¯Ø© Ø¥Ù†Ø¬Ø§Ø²", certCanvas.width/2, 190);

      ctx.fillStyle = "#475569";
      ctx.font = "800 30px system-ui, -apple-system, 'Segoe UI', Tahoma, Arial";
      ctx.fillText("ØªØ¯Ø±ÙŠØ¨ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§ÙØ³ ÙÙŠ Ù…Ø§Ø¯Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ù„Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ", certCanvas.width/2, 245);

      // Ø¨ÙŠØ§Ù†Ø§Øª
      const name = (studentName.value || "").trim();
      const cls  = (classRoom.value || "").trim();
      ctx.fillStyle = "#0f172a";
      ctx.font = "900 44px system-ui, -apple-system, 'Segoe UI', Tahoma, Arial";
      ctx.fillText(`Ù†ÙØ¨Ø§Ø±Ùƒ Ù„Ù„Ø·Ø§Ù„Ø¨/Ù€Ø©: ${name}`, certCanvas.width/2, 360);

      ctx.fillStyle = "#334155";
      ctx.font = "800 34px system-ui, -apple-system, 'Segoe UI', Tahoma, Arial";
      ctx.fillText(`Ø§Ù„ÙØµÙ„: ${cls}  â€¢  Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹: ${selectedWeek}`, certCanvas.width/2, 420);

      // Ø§Ù„Ù†ØªÙŠØ¬Ø©
      const total = QUESTIONS.length;
      let correctCount = 0;
      for(let i=0;i<total;i++){
        if(answers[i] === QUESTIONS[i].correct) correctCount++;
      }
      const percent = Math.round((correctCount/total)*100);

      // Ø´Ø±ÙŠØ·
      ctx.fillStyle = "rgba(79,70,229,.10)";
      roundRect(ctx, 260, 490, certCanvas.width-520, 120, 26);
      ctx.fill();

      ctx.fillStyle = "#111827";
      ctx.font = "900 44px system-ui, -apple-system, 'Segoe UI', Tahoma, Arial";
      ctx.fillText(`Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${correctCount} / ${total}  (${percent}Ùª)`, certCanvas.width/2, 565);

      // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø©/Ø¥Ø¹Ø¯Ø§Ø¯
      ctx.fillStyle = "#0f172a";
      ctx.font = "900 30px system-ui, -apple-system, 'Segoe UI', Tahoma, Arial";
      ctx.textAlign = "right";
      ctx.fillText("Ù…Ø¯Ø±Ø³Ø© Ø¹Ù„ÙŠ Ø¨Ù† Ø£Ø¨ÙŠ Ø·Ø§Ù„Ø¨ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©", certCanvas.width-140, 760);

      ctx.fillStyle = "#475569";
      ctx.font = "800 26px system-ui, -apple-system, 'Segoe UI', Tahoma, Arial";
      ctx.fillText("Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø¨Ù…Ù†Ø·Ù‚Ø© Ù†Ø¬Ø±Ø§Ù†", certCanvas.width-140, 805);
      ctx.fillText("Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: Ù†ÙˆØ§Ù Ø¢Ù„ Ø¬Ø§ÙÙ„Ø©", certCanvas.width-140, 845);

      ctx.textAlign = "left";
      ctx.fillStyle = "#0f172a";
      ctx.font = "900 30px system-ui, -apple-system, 'Segoe UI', Tahoma, Arial";
      ctx.fillText("Ø¥Ø¹Ø¯Ø§Ø¯: Ù…ÙˆØ³Ù‰ Ø§Ù„ØµØ¨Ø­ÙŠ", 140, 845);

      // Ø§Ù„ØªØ§Ø±ÙŠØ®
      const now = new Date();
      const date = now.toLocaleDateString("ar-SA");
      ctx.fillStyle = "#64748b";
      ctx.font = "800 22px system-ui, -apple-system, 'Segoe UI', Tahoma, Arial";
      ctx.textAlign = "center";
      ctx.fillText(`Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}`, certCanvas.width/2, 930);

      // Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© (Ø¥Ù† ÙˆØ¬Ø¯)
      const img = new Image();
      img.src = "Ù…Ø¯Ø±Ø³Ø©.png";
      img.onload = ()=>{
        ctx.drawImage(img, 130, 140, 120, 120);
      };
      // Ù„Ùˆ Ù…Ø§ Ø­Ù…Ù„ Ù„Ø§ ÙŠÙ‡Ù…
    }

    btnDownload.addEventListener("click", ()=>{
      drawCertificate();
      const a = document.createElement("a");
      a.download = `Ø´Ù‡Ø§Ø¯Ø©-Ù†Ø§ÙØ³-${studentName.value.trim() || "Ø·Ø§Ù„Ø¨"}.png`;
      a.href = certCanvas.toDataURL("image/png");
      a.click();
    });

    btnPrint.addEventListener("click", ()=>{
      drawCertificate();
      const data = certCanvas.toDataURL("image/png");
      const w = window.open("");
      w.document.write(`
        <html dir="rtl" lang="ar">
          <head><title>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©</title></head>
          <body style="margin:0; display:grid; place-items:center; background:#fff;">
            <img src="${data}" style="width:95vw; max-width:1000px; height:auto;" />
            <script>window.onload=()=>{ setTimeout(()=>{ window.print(); }, 400); }<\/script>
          </body>
        </html>
      `);
      w.document.close();
    });

    /***********************
     * 10) Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
     ***********************/
    function toArabicDigits(x){
      return String(x).replace(/\d/g, d=>"Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©"[d]);
    }
    function formatTime(sec){
      const m = Math.floor(sec/60);
      const s = sec%60;
      return `${toArabicDigits(m)}:${toArabicDigits(String(s).padStart(2,"0"))}`;
    }
    function roundRect(ctx, x, y, w, h, r){
      const min = Math.min(w,h);
      if(r > min/2) r = min/2;
      ctx.beginPath();
      ctx.moveTo(x+r, y);
      ctx.arcTo(x+w, y, x+w, y+h, r);
      ctx.arcTo(x+w, y+h, x, y+h, r);
      ctx.arcTo(x, y+h, x, y, r);
      ctx.arcTo(x, y, x+w, y, r);
      ctx.closePath();
    }

    /***********************
     * 11) ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
     ***********************/
    buildWeeks();
  </script>
</body>
</html>
